# 修仙星宿系统

一个基于TShock的泰拉瑞亚服务器插件，实现完美世界修炼体系与星宿流派系统，包含Boss战观战功能。

# 功能特性

· 🌟 完美世界修炼体系 - 从凡人到仙帝的完整境界系统
· ✨ 星宿流派选择 - 六大星宿流派，各有特色加成
· 💫 命座系统 - 七重命座，每层都有强力效果
· ⚔️ Boss战观战系统 - 被Boss击杀可灵魂观战，Boss死亡后复活
· 🔄 转生系统 - 寿元耗尽可转世重修
· 🎯 反魂功能 - 消耗寿元自行复活
· 📊 双UI显示 - 聊天框和顶部状态栏双重信息显示
· 🎁 突破奖励 - 境界突破获得物品和Buff奖励
· ⏰ 寿元系统 - 寿元耗尽将被踢出服务器

# 安装方法

1. 将编译后的 XiuXianShouYuan.dll 文件放入 TShock 服务器的 ServerPlugins 文件夹中
2. 重启服务器或使用 /reload 命令加载插件
3. 插件会自动生成配置文件和权限组

# 权限节点

· shouyuan.player - 修仙弟子权限（基础玩家权限）
· shouyuan.admin - 修仙仙尊权限（管理员权限）

# 指令

# 玩家指令

# 语法 别名 权限 说明
| /状态 | 无 | shouyuan.player | 查看完整的修仙状态信息 |
| /修仙 | 无 | shouyuan.player | 修仙主命令，包含多个子命令 |
| /修仙 状态 | 无 | shouyuan.player | 查看状态 |
| /修仙 修炼 | 无 | shouyuan.player | 手动修炼，增加修为 |
| /修仙 突破 | 无 | shouyuan.player | 尝试突破到下一境界 |
| /修仙 转生 | 无 | shouyuan.player | 转世重修 (需散尽修为) |
|/修仙 星宿 | 无 | shouyuan.player | 查看星宿流派信息 |
| /法号 <名称> | 无 | shouyuan.player | 设置个性化法号 |
| /选择星宿 | 无 | shouyuan.player | 选择星宿流派 (仅限一次) |
| /命座 | 无 | shouyuan.player | 查看命座等级和效果 |
| /散尽修为 确认 | 无 shouyuan.player | 重置境界到凡人 (不可逆) |
| /反魂 自己 | 无 | shouyuan.player | 消耗寿元复活自己 (Boss战后) |

# 管理员指令

# 语法 别名 权限 说明
| /寿元转生 <玩家名> | 无 | shouyuan.admin | 强制为玩家转生 |
| /调整寿元 <玩家名> <数值> | 无 | shouyuan.admin | 调整玩家寿元 |
| /设置服务器名称 <名称> | 无 | shouyuan.admin | 设置服务器显示名称 |
| /设置聊天ui偏移 <X> <Y> | /chatuioffset shouyuan.admin | 设置聊天UI位置偏移 |
| /设置顶部ui偏移 <X> <Y> | /topuioffset shouyuan.admin | 设置顶部UI位置偏移 |
| /设置顶部ui刷新间隔 <毫秒> | /topuirefresh shouyuan.admin | 设置顶部UI刷新频率 |
| /设置聊天ui刷新间隔 <分钟> | /chatuirefresh shouyuan.admin | 设置聊天UI刷新频率 |
| /设置星宿图标 <星宿> <物品ID> | /setsignicon shouyuan.admin | 设置星宿显示图标 |
| /添加境界条件 <境界> <Boss> | 无 | shouyuan.admin 为境界添加突破条件 |
| /添加境界奖励 <境界> <物品ID> <数量> <前缀> | 无 | shouyuan.admin 为境界添加突破奖励 |
| /添加境界buff <境界> <BuffID> <秒数> | 无 | shouyuan.admin | 为境界添加Buff奖励 |
| /重读修仙 | /reloadxiuxian | shouyuan.admin | 重新加载修仙配置文件 |
| /仙道重开 确认 | 无 | shouyuan.admin | 重置所有玩家境界（慎用）|
| /反魂 [玩家名] | 无 | shouyuan.admin | 复活指定或所有灵魂状态玩家 |

# 配置

配置文件位置: tshock/XiuXianConfig.json

主要配置项

```json
{
  "ServerName": "泰拉修仙传",
  "RebirthCost": 200,
  "BroadcastBreakthrough": true,
  "ChatUIOffsetX": 2,
  "ChatUIOffsetY": 1,
  "TopUIOffsetX": -13,
  "TopUIOffsetY": 10,
  "TopUIRefreshInterval": 10000,
  "ChatUIRefreshInterval": 1,
  "LifeDepletionCountdown": 20,
  "SoulReturnCost": 50
}
```

# 境界体系

插件包含完整的18重境界体系：

1. 凡人 (0级) - 初始境界
2. 搬血 (1级) - 基础修炼
3. 洞天 (2级) - 开辟洞天
4. 化灵 (3级) - 灵气化形
5. 铭纹 (4级) - 铭刻道纹
6. 列阵 (5级) - 布设阵法
7. 尊者 (6级) - 尊者之境
8. 神火 (7级) - 点燃神火
9. 真一 (8级) - 真一境界
10. 圣祭 (9级) - 圣祭天地
11. 天神 (10级) - 天神领域
12. 虚道 (11级) - 虚空大道
13. 斩我 (12级) - 斩我明道
14. 遁一 (13级) - 遁去其一
15. 至尊 (14级) - 至尊无上
16. 真仙 (15级) - 真仙降临
17. 仙帝 (18级) - 仙帝之境

# 星宿流派

六大星宿流派供选择：

· 紫微帝星 (全能) - 全面均衡发展
· 破军杀星 (攻击) - 极致攻击路线
· 天机玄星 (辅助) - 辅助与阵法专精
· 武曲战星 (防御) - 极致防御路线
· 七杀凶星 (攻击) - 狂暴攻击路线
· 太阴玄星 (辅助) - 治疗与恢复专精

# 命座系统

七重命座效果：

1. 天枢 - 生命上限+20%，基础防御+15%
2. 天璇 - 攻击力+25%，暴击伤害+30%
3. 天玑 - 灵气吸收速度+40%，修炼效率+10%
4. 天权 - 寿元消耗减少20%，突破成功率+10%
5. 玉衡 - 全元素抗性+30%，异常状态抵抗+50%
6. 开阳 - 移动速度+35%，闪避率+25%
7. 摇光 - 全属性+30%，大道感悟速度翻倍

工作机制

修炼系统

· 自动修炼：每30秒自动增加修为
· 手动修炼：使用 /修仙 修炼 快速提升
· 境界突破：达到要求后尝试突破，可能失败

# 寿元系统

· 初始寿元：80年
· 消耗方式：自动修炼、受伤、死亡
· 寿元耗尽：倒计时后踢出服务器

# Boss战观战

· Boss生成：自动检测并创建观战区域
· 灵魂状态：被Boss击杀后进入观战模式
· 复活机制：Boss死亡后自动复活，或使用反魂命令

# 突破条件

每个境界可能需要击败特定Boss才能突破：

· 列阵境：克苏鲁之眼
· 尊者境：世界吞噬者、克苏鲁之脑
· 神火境：骷髅王
· 真一境：蜂后
· 圣祭境：血肉之墙
· 天神境：机械三王
· 虚道境：世纪之花
· 斩我境：石巨人
· 遁一境：猪龙鱼公爵
· 至尊境：月亮领主
· 真仙境：光之女皇
· 仙帝境：所有Boss

# 故障排除

# 插件未加载

· 检查DLL文件是否放置在正确的 ServerPlugins 文件夹
· 查看服务器日志确认是否有加载错误
· 确认TShock版本兼容性

# 配置不生效

· 使用 /重读修仙 命令重载配置
· 检查配置文件格式是否正确
· 确认有足够的权限使用命令

# UI显示异常

· 调整UI偏移配置适应服务器设置
· 检查刷新间隔设置是否合理
· 确认玩家权限组设置正确

# Boss战功能异常

· 检查Boss名称识别是否正确
· 确认NPC索引在有效范围内
· 查看服务器日志获取详细错误信息

# 版本信息

v1.2.3

· 新增Boss战观战系统
· 添加反魂功能
· 优化UI显示和刷新机制
· 修复多个已知问题

v1.2.0

· 新增星宿图标配置
· 添加境界Buff奖励系统
· 改进配置重载功能
· 优化突破条件检查

v1.1.0

· 添加双UI显示系统
· 实现命座系统
· 新增散尽修为功能
· 完善管理员命令

v1.0.0

· 初始版本发布
· 基础修仙系统实现
· 星宿流派选择
· 境界突破机制
· 当前版本: 1.2.3
· 支持TShock版本: 4.5.0+
· 支持泰拉瑞亚版本: 1.4.3+

# 开发者信息

· 作者: 泷白
· 许可证: GPL-3.0

反馈

· 优先发issue -> 共同维护的插件库: https://github.com/UnrealMultiple/TShockPlugin
· 次优先: TShock官方群: 816771079
· 国内社区: trhub.cn, bbstr.net, tr.monika.love

---

注意: 此插件会显著改变游戏平衡性，建议在专门的修仙服务器中使用 普通生存服务器请谨慎使用

· 优先发issue -> 共同维护的插件库: https://github.com/UnrealMultiple/TShockPlugin
· 次优先: TShock官方群: 816771079
· 国内社区: trhub.cn, bbstr.net, tr.monika.love